"use strict";var __rest=this&&this.__rest||function(e,r){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArraySchema=exports.ArrayClosingLabel=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),styled_components_1=__importDefault(require("styled-components")),jotai_1=require("jotai"),common_1=require("../common"),Schema_1=require("./Schema"),ObjectSchema_1=require("./ObjectSchema"),utils_1=require("../../utils"),SubSchema_1=require("./SubSchema"),store_1=require("../../jotai/store"),helpers_1=require("./helpers");function ArraySchemaComponent(e){var r,t,{schema:a,schema:{minItems:n,maxItems:s,items:i},fieldParentsName:l}=e,o=__rest(e,["schema","schema","fieldParentsName"]);const{schemasExpansionLevel:c}=(0,jotai_1.useAtomValue)(store_1.globalOptionsAtom),m=void 0===n&&void 0===s?"":`(${(0,utils_1.humanizeConstraints)(a)})`;let u=l?[...l.slice(0,-1),l[l.length-1]+"[]"]:l;const d=(0,react_1.useCallback)((e=>o.skipReadOnly||o.skipWriteOnly?null==e?void 0:e.filter((e=>!(o.skipReadOnly&&e.schema.readOnly||o.skipWriteOnly&&e.schema.writeOnly))):e),[o.skipReadOnly,o.skipWriteOnly]);if(null==a?void 0:a.fields)return(0,jsx_runtime_1.jsx)(ObjectSchema_1.ObjectSchema,Object.assign({},o,{level:(null==o?void 0:o.level)||1,schema:a,fieldParentsName:u}));if(a.displayType&&!i&&!m.length)return(0,jsx_runtime_1.jsx)("div",{children:(0,jsx_runtime_1.jsx)(common_1.TypeName,{children:a.displayType})});const p=d(null==i?void 0:i.fields),_=d(null===(t=null===(r=null==i?void 0:i.oneOf)||void 0===r?void 0:r[0])||void 0===t?void 0:t.fields),h=(null==p?void 0:p.length)||(null==_?void 0:_.length),y=1===o.level,x=(0,helpers_1.getExpandByDefault)({level:o.level,required:o.required,schemasExpansionLevel:c});return(0,jsx_runtime_1.jsx)(SubSchema_1.SubSchema,Object.assign({},o,{propertyLength:h,isArray:!0,expandable:!y,expandByDefault:x,operationPointer:a.operationPointer,children:(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[y&&(0,jsx_runtime_1.jsx)(ArrayLabel,{children:(0,jsx_runtime_1.jsx)(LabelValue,{children:"Array ["})}),(0,jsx_runtime_1.jsx)(Schema_1.Schema,Object.assign({},o,{schema:i,fieldParentsName:u,expandable:!1})),y&&(0,jsx_runtime_1.jsx)(exports.ArrayClosingLabel,{className:"array-closing-label",children:(0,jsx_runtime_1.jsx)(LabelValue,{children:"]"})})]})}))}const ArrayLabel=styled_components_1.default.span`
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  margin-top: var(--spacing-xs);

  :after {
    content: '';
    flex: auto;
    border-top: 1px solid var(--border-color-primary);
  }
`,LabelValue=styled_components_1.default.span`
  padding: 0 var(--spacing-xs);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color-secondary);
  background-color: var(--bg-color);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-sm);
  color: var(--tag-basic-content-color);
`;exports.ArrayClosingLabel=(0,styled_components_1.default)(ArrayLabel)`
  margin-top: 0;
  margin-left: auto;

  :after {
    content: none;
  }

  :before {
    content: '';
    flex: auto;
    border-top: 1px solid var(--border-color-primary);
  }
`,exports.ArraySchema=(0,react_1.memo)(ArraySchemaComponent);
//# sourceMappingURL=ArraySchema.js.map
"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__rest=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]])}return r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Markdown=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=__importStar(require("react")),markdoc_1=require("@markdoc/markdoc"),jotai_1=require("jotai"),dompurify_1=__importDefault(require("dompurify")),theme_1=require("@redocly/theme"),store_1=require("../../jotai/store"),TAGS_NOT_TO_WRAP=["OpenApiResponse","OpenApiRequestBody"],Markdown=e=>{var t,r,o,i,n,a,s,l,u,{source:d,ast:c,htmlWrap:_}=e,m=__rest(e,["source","ast","htmlWrap"]);const p=(0,jotai_1.useAtomValue)(store_1.globalOptionsAtom);if(!d&&!c)return null;const f=(null==p?void 0:p.markdocOptions)&&{tags:null===(t=p.markdocOptions)||void 0===t?void 0:t.tags,nodes:null===(r=p.markdocOptions)||void 0===r?void 0:r.nodes,partials:null===(o=p.markdocOptions)||void 0===o?void 0:o.partials,variables:null===(i=p.markdocOptions)||void 0===i?void 0:i.variables,functions:null===(n=p.markdocOptions)||void 0===n?void 0:n.functions},v=(null==p?void 0:p.markdocOptions)&&{components:null===(a=p.markdocOptions)||void 0===a?void 0:a.components};let O;if(d)if((0,theme_1.isString)(d)){const e=(null===(s=null==p?void 0:p.unstable_hooks)||void 0===s?void 0:s.sanitize)?null===(u=null===(l=p.unstable_hooks)||void 0===l?void 0:l.sanitize)||void 0===u?void 0:u.call(l,d):(null==p?void 0:p.sanitize)?dompurify_1.default.sanitize(d):d,t=(0,markdoc_1.parse)(e);O=(0,markdoc_1.transform)(t,f)}else{const e=markdoc_1.Ast.fromJSON("object"==typeof d.result?JSON.stringify(d.result):d.result);O=(Array.isArray(e),(0,markdoc_1.transform)(e,f))}else c&&(O=(0,markdoc_1.transform)(c,f));const b=e=>{const t=markdoc_1.renderers.react(e,react_1.default,v);return(0,jsx_runtime_1.jsx)(theme_1.Markdown,Object.assign({},m,{children:t,as:"div"}))};if(!_)return b(O);const h=e=>{var t;return!1!==(null===(t=e.attributes)||void 0===t?void 0:t.htmlWrap)&&!TAGS_NOT_TO_WRAP.includes(null==e?void 0:e.name)};return O=Array.isArray(O)?O:O.children,(0,jsx_runtime_1.jsx)(jsx_runtime_1.Fragment,{children:O.map(((e,t)=>{var r,o,i;return(0,jsx_runtime_1.jsx)(react_1.Fragment,{children:(o=h(e),i=e,o?_(b(i)):b(i))},(null===(r=null==e?void 0:e.attributes)||void 0===r?void 0:r.id)||t)}))})};exports.Markdown=Markdown;
//# sourceMappingURL=Markdown.js.map
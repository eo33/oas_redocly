"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FieldDetails=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),jotai_1=require("jotai"),styled_components_1=__importDefault(require("styled-components")),theme_1=require("@redocly/theme"),common_1=require("../common"),ExternalDocumentation_1=require("../ExternalDocumentation"),Markdown_1=require("../Markdown"),FieldDetail_1=require("./FieldDetail"),Extensions_1=require("./Extensions"),EnumValues_1=require("./EnumValues"),Examples_1=require("./Examples"),store_1=require("../../jotai/store"),SchemaTypeInfo_1=require("./SchemaTypeInfo"),LinkToField_1=require("../common/LinkToField"),Pattern_1=require("./Pattern"),RenderHook_1=require("../RenderHook"),hooks_1=require("../../hooks");function FieldDetailsComponent({field:e,renderDiscriminatorSwitch:i,deepLink:t,fieldParentsName:r=[]}){var n;const a=(0,hooks_1.useTranslate)(),{hidePropertiesPrefix:o,hideSchemaTitles:s}=(0,jotai_1.useAtomValue)(store_1.globalOptionsAtom),{schema:l,description:m,example:p,deprecated:_,examples:c,kind:d,required:u,name:x}=e,j="header"===e.in,h=(0,react_1.useMemo)((()=>{if(void 0!==p||void 0!==c){if(void 0!==c)return(0,jsx_runtime_1.jsx)(Examples_1.Examples,{field:e});{const i=!!e.in;return(0,jsx_runtime_1.jsx)(FieldDetail_1.FieldDetail,{label:`${a("openapi.example","Example")}:`,value:(0,Examples_1.getSerializedValue)(e,e.example),raw:i})}}return null}),[p,c,e,a]),f=(0,RenderHook_1.getAccessModeLabelText)(e.schema);return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[(0,jsx_runtime_1.jsxs)(Row,{children:[x&&(0,jsx_runtime_1.jsxs)(Name,{children:[t&&(0,jsx_runtime_1.jsx)(LinkToField_1.LinkToField,{to:t}),!o&&r.map((e=>e+".â€‹")),(0,jsx_runtime_1.jsx)(SchemaName,{className:"schema-name",children:x})]}),(0,jsx_runtime_1.jsx)(SchemaTypeInfo_1.SchemaTypeInfo,{type:l.typePrefix+l.displayType}),(0,jsx_runtime_1.jsx)(SchemaTypeInfo_1.SchemaTypeInfo,{type:l.displayFormat&&`(${l.displayFormat})`}),(0,jsx_runtime_1.jsx)(SchemaTypeInfo_1.SchemaTypeInfo,{type:l.contentEncoding}),(0,jsx_runtime_1.jsx)(SchemaTypeInfo_1.SchemaTypeInfo,{type:l.title&&!s?`(${l.title})`:""}),null===(n=l.constraints)||void 0===n?void 0:n.map((e=>(0,jsx_runtime_1.jsx)(SchemaTypeInfo_1.SchemaTypeInfo,{type:e},e))),_&&(0,jsx_runtime_1.jsx)(common_1.StyledBadge,{deprecated:!0,children:a("openapi.badges.deprecated","Deprecated")}),(0,jsx_runtime_1.jsx)(Pattern_1.Pattern,{pattern:l.pattern}),"additionalProperties"===d&&(0,jsx_runtime_1.jsx)(common_1.Tag,{children:a("openapi.additionalProperties","additional property")}),"patternProperties"===d&&(0,jsx_runtime_1.jsx)(common_1.Tag,{children:a("openapi.patternProperties","pattern property")}),f&&(0,jsx_runtime_1.jsx)(common_1.AccessLabel,{children:f}),u&&(0,jsx_runtime_1.jsx)(common_1.RequiredLabel,{children:a("openapi.required","required")}),l.isCircular&&(0,jsx_runtime_1.jsx)(common_1.RecursiveLabel,{children:a("openapi.recursive","Recursive")})]}),l.isComplex&&(0,jsx_runtime_1.jsx)(common_1.RecursiveLabel,{children:a("openapi.complex","Complex")}),(0,jsx_runtime_1.jsx)(StyledDescription,{source:m}),(0,jsx_runtime_1.jsx)(FieldDetail_1.FieldDetail,{raw:j,type:"default",label:a("openapi.default","Default"),value:l.default}),(0,jsx_runtime_1.jsx)(EnumValues_1.EnumValues,{type:l.type,values:l["x-enumDescriptions"]||l.enum}),h,(0,jsx_runtime_1.jsx)(Extensions_1.Extensions,{extensions:Object.assign(Object.assign({},e.extensions),l.extensions)}),l.externalDocs&&(0,jsx_runtime_1.jsx)(ExternalDocumentation_1.ExternalDocumentation,{externalDocs:l.externalDocs,compact:!0}),null==i?void 0:i(),(0,jsx_runtime_1.jsx)(FieldDetail_1.FieldDetail,{label:a("openapi.value","Value"),value:e.const||void 0})]})}exports.FieldDetails=(0,react_1.memo)(FieldDetailsComponent);const Row=styled_components_1.default.div`
  display: flex;
  align-items: center;
  gap: calc(var(--spacing-xxs) / 4) var(--spacing-xxs);
  flex-wrap: wrap;
  margin-bottom: 2px;
  position: relative;
`,StyledDescription=(0,styled_components_1.default)(Markdown_1.Markdown)`
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);

  article p:last-child {
    margin-bottom: 0;
  }
`,Name=styled_components_1.default.span`
  position: relative;
  font-family: var(--font-family-monospaced);
  line-height: var(--line-height-base);
  font-size: var(--font-size-base);
  color: var(--text-color-description);
  max-width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;

  :hover {
    ${theme_1.LinkIcon} {
      opacity: 1;
      visibility: visible;
      background-color: var(--bg-color);
    }
  }
`,SchemaName=styled_components_1.default.span`
  font-family: var(--font-family-monospaced);
  font-weight: var(--font-weight-semibold);
  font-size: var(--schemas-property-name-font-size);
  line-height: var(--schemas-property-name-line-height);
  color: var(--text-color-primary);
`;
//# sourceMappingURL=FieldDetails.js.map
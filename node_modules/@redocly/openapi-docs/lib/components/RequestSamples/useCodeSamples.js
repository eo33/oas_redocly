"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useCodeSamples=useCodeSamples;const jotai_1=require("jotai"),services_1=require("../../services"),store_1=require("../../jotai/store"),operation_1=require("../../jotai/operation"),app_1=require("../../jotai/app"),hooks_1=require("../../hooks");function useCodeSamples({payload:e,isWebhook:a,definitionSamples:t,pointer:o}){var s;const{parser:r,options:{codeSamples:n,generatedSamplesMaxDepth:l}}=(0,jotai_1.useAtomValue)(store_1.globalStoreAtom),i=(0,jotai_1.useAtomValue)((0,operation_1.operationStore)(o)),{languages:p}=(0,jotai_1.useAtomValue)(app_1.languageAtom),[g]=(0,jotai_1.useAtomValue)(app_1.environmentAtom),u=(0,hooks_1.useTranslate)(),m=new Map(null==p?void 0:p.map((({key:e,order:a})=>[e,a]))),d=t.filter((e=>m.has((0,app_1.getLangKey)(e)))),c=new Set(d.map(app_1.getLangKey));let _=[];if(!a){_=createCodeSamples((null===(s=n.languages)||void 0===s?void 0:s.filter((({lang:e,label:a})=>"Payload"!==e&&!c.has((0,app_1.getLangKey)({lang:e,label:a})))))||[],n,r.definition,l,i,g,u)}const j=[...d,..._];e&&m.has(e.lang.toLowerCase())&&j.push(Object.assign(Object.assign({},e),{order:m.get(e.lang.toLowerCase())}));const b=j.map((e=>{var a;const t=null!==(a=e.label)&&void 0!==a?a:e.lang;return Object.assign({key:(0,app_1.getLangKey)(e),title:t,order:"number"==typeof m.get(t.toLowerCase())?m.get(t.toLowerCase()):9999},e)})).sort(((e,a)=>e.order-a.order));return{samples:b}}function createCodeSamples(e,{skipOptionalParameters:a,withOAuth2Call:t},o,s,r,n,l){return e.map((({lang:e,label:i,options:p})=>({lang:e,label:i,get:i=>(0,services_1.getCodeSample)(Object.assign(Object.assign({},i),{lang:e,options:Object.assign(Object.assign({},p),{skipOptionalParameters:a,withOAuth2Call:t,spec:o,generatedPayloadSamplesMaxDepth:s,store:r}),environment:n,translate:l}))})))}
//# sourceMappingURL=useCodeSamples.js.map
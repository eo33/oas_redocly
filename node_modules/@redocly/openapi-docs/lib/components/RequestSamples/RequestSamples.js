"use strict";var __rest=this&&this.__rest||function(e,o){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)o.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]])}return r},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestSamples=void 0;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),jotai_1=require("jotai"),theme_1=require("@redocly/theme"),styled_components_1=__importDefault(require("styled-components")),PayloadSamples_1=require("../PayloadSamples"),CodeSample_1=require("./CodeSample"),useCodeSamples_1=require("./useCodeSamples"),models_1=require("../../models"),events_1=require("../../events"),store_1=require("../../jotai/store"),ServerListDropdown_1=require("../ServerListDropdown"),Language_1=require("../Language"),app_1=require("../../jotai/app"),Replay_1=require("../Replay"),common_1=require("../common"),hooks_1=require("../../hooks");function RequestSamplesComponent(e){var{operation:o,disableFooter:r}=e,t=__rest(e,["operation","disableFooter"]);const[{activeLanguage:a},s]=(0,jotai_1.useAtom)(app_1.languageAtom),{samples:n}=(0,useCodeSamples_1.useCodeSamples)(o),{parser:l,options:{events:i,corsProxyUrl:p,hideReplay:u}}=(0,jotai_1.useAtomValue)(store_1.globalStoreAtom),_=(0,hooks_1.useActiveWithFallback)(n,a),m=(0,react_1.useCallback)((({lang:e,title:r})=>()=>{var t;const a=(0,events_1.createCodeSampleCopyEvent)({operation:o,label:r,lang:e,type:"request"});null===(t=null==i?void 0:i.codeSamplesCopy)||void 0===t||t.call(i,a)}),[o,i]),d=(0,react_1.useMemo)((()=>{if(!(r||o.isWebhook||u||o.hideReplay))return(0,jsx_runtime_1.jsx)(Replay_1.Replay,{operation:o,corsProxyUrl:p,fullOpenApi:l.definition})}),[p,r,u,o,l.definition]),c=(0,react_1.useMemo)((()=>n.map((e=>e.key===_?(0,jsx_runtime_1.jsx)("div",{children:(0,models_1.isPayloadSample)(e)?(0,jsx_runtime_1.jsx)(PayloadSamples_1.PayloadSamples,Object.assign({content:e.requestBodyContent,onCopyClick:m(e)},t)):(0,jsx_runtime_1.jsx)(CodeSample_1.CodeSample,Object.assign({lang:e.lang,source:e.source,externalSample:e,operation:o,onCopyClick:m(e)},t))},e.key+o.id):null))),[_,m,o,t,n]);return n.length?(0,jsx_runtime_1.jsx)(common_1.CodeBlockPanel,{className:"panel-request-samples",header:()=>(0,jsx_runtime_1.jsxs)(StyledPanelHeader,{isExpandable:!1,children:[(0,jsx_runtime_1.jsx)(StyledServerListDropdown,{operation:o}),(0,jsx_runtime_1.jsx)(Language_1.LanguageDropdown,{activeTab:_,samples:n,onChange:s})]}),footer:d,isExpandable:!1,children:c}):null}exports.RequestSamples=(0,react_1.memo)(RequestSamplesComponent);const StyledPanelHeader=(0,styled_components_1.default)(theme_1.PanelHeader)`
  flex-wrap: nowrap;
`,StyledServerListDropdown=(0,styled_components_1.default)(ServerListDropdown_1.ServerListDropdown)`
  padding-right: var(--spacing-base);
  min-width: 0;
`;
//# sourceMappingURL=RequestSamples.js.map
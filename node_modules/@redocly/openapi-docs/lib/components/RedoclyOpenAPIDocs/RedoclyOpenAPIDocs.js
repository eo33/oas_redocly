"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedoclyOpenAPIDocs=RedoclyOpenAPIDocs,exports.RedoclyOpenAPIDocsStandalone=RedoclyOpenAPIDocsStandalone;const jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),theme_1=require("@redocly/theme"),Providers_1=require("./Providers"),Overlay_1=require("../Overlay"),styled_1=require("./styled"),StickySidebar_1=require("../StickySidebar"),SideMenu_1=require("../SideMenu"),Content_1=require("../Content"),hooks_1=require("../../hooks"),withRouter_1=require("../../hoc/withRouter"),withStore_1=require("../../hoc/withStore"),utils_1=require("../../utils"),useLicense_1=require("../../hooks/useLicense"),RedoclyOpenAPIDocsComponent=(0,utils_1.compose)(withRouter_1.withRouter,withStore_1.withStore,react_1.memo)((({licenseKey:e,onLoaded:i,children:o,options:t,layout:n,collapsedSidebar:r,parser:s,withCommonStyles:l})=>{var d,a,u,c,_;const m=(0,react_1.useRef)(null),{isValid:h,licenseInfo:p}=(0,useLicense_1.useLicense)(e);(0,hooks_1.useUppercase2LowercaseRedirect)(),(0,theme_1.useMount)((()=>{null==i||i()}));const{hideSidebar:v,scrollYOffset:y}=t||{},{contentItems:x}=(0,hooks_1.useContentItems)({parser:s,options:t}),S=null===(a=null===(d=s.definition)||void 0===d?void 0:d.info)||void 0===a?void 0:a["x-logo"];return(0,jsx_runtime_1.jsxs)(jsx_runtime_1.Fragment,{children:[l&&(0,jsx_runtime_1.jsx)(theme_1.GlobalStyle,{}),(0,jsx_runtime_1.jsxs)(styled_1.RedocWrap,{className:"redoc-wrap",ref:m,children:[!h&&(0,jsx_runtime_1.jsx)(Overlay_1.Overlay,{licenseInfo:p}),!v&&(0,jsx_runtime_1.jsxs)(StickySidebar_1.StickyResponsiveSidebar,{scrollYOffset:y,className:"menu-content",collapsedSidebar:!r,children:[(0,jsx_runtime_1.jsx)(theme_1.SidebarLogo,{imageUrl:null==S?void 0:S.url,href:(null==S?void 0:S.href)||(null===(_=null===(c=null===(u=s.definition)||void 0===u?void 0:u.info)||void 0===c?void 0:c.contact)||void 0===_?void 0:_.url),altText:null==S?void 0:S.altText,backgroundColor:null==S?void 0:S.backgroundColor}),(0,jsx_runtime_1.jsx)(SideMenu_1.SideMenu,{items:h?x:[]})]}),(0,jsx_runtime_1.jsxs)(theme_1.ThreePanelLayout,{className:"api-content",id:"api-content",layout:n===theme_1.LayoutVariant.THREE_PANEL?theme_1.LayoutVariant.THREE_PANEL:theme_1.LayoutVariant.STACKED,collapsedSidebar:r,children:[(0,jsx_runtime_1.jsx)(Content_1.Content,{items:h?x:[],routingBasePath:t.routingBasePath}),o]})]})]})}));function RedoclyOpenAPIDocs({onLoaded:e,children:i,store:o,withCommonStyles:t}){var n,r,s;return(null==o?void 0:o.definition)?(0,jsx_runtime_1.jsx)(Providers_1.StoreProvider,Object.assign({},o,{children:(0,jsx_runtime_1.jsx)(RedoclyOpenAPIDocsComponent,{onLoaded:e,basePath:null===(n=o.options)||void 0===n?void 0:n.routingBasePath,licenseKey:null===(r=o.options)||void 0===r?void 0:r.licenseKey,disableRouter:null===(s=o.options)||void 0===s?void 0:s.disableRouter,withCommonStyles:t,children:i})})):null}function RedoclyOpenAPIDocsStandalone({definition:e,definitionUrl:i,options:o={},activeItemId:t,activeSampleLanguage:n,activeDeepLink:r}){return(0,jsx_runtime_1.jsx)(Providers_1.AppProvider,{definition:e,definitionUrl:i,options:o,activeItemId:t,activeSampleLanguage:n,activeDeepLink:r,children:(0,jsx_runtime_1.jsx)(RedoclyOpenAPIDocs,{withCommonStyles:!0})})}
//# sourceMappingURL=RedoclyOpenAPIDocs.js.map
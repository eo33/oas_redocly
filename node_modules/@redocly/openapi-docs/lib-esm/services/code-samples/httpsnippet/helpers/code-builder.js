import*as util from"util";import{Lang,NamingVariableConventions,VariableType}from"./constants";import StringUtility from"./string-utility";const langToVarNameConvention={[Lang.NODEJS]:NamingVariableConventions.CAMEL_CASE,[Lang.JAVASCRIPT]:NamingVariableConventions.CAMEL_CASE,[Lang.PYTHON]:NamingVariableConventions.UNDER_SCORES,[Lang.JAVA8]:NamingVariableConventions.CAMEL_CASE,[Lang.JAVA]:NamingVariableConventions.CAMEL_CASE,[Lang.CSHARP]:NamingVariableConventions.PASCAL_CASE,[Lang.CSHARPNEWTONSOFT]:NamingVariableConventions.PASCAL_CASE,[Lang.CURL]:NamingVariableConventions.CAMEL_CASE,[Lang.GO]:NamingVariableConventions.CAMEL_CASE,[Lang.PHP]:NamingVariableConventions.CAMEL_CASE,[Lang.RUBY]:NamingVariableConventions.UNDER_SCORES,[Lang.R]:NamingVariableConventions.UNDER_SCORES},langOptions={default:{joinSymbol:"",variableWrapperFn:a=>a,stringLiteral:a=>a,variableDeclaration:a=>a,urlFieldName:"url"},[Lang.CSHARP]:{joinSymbol:" + ",stringLiteral:a=>`"${a}"`,variableDeclaration:a=>`var ${a} = "%s";`,urlFieldName:"fullUrl"},[Lang.CSHARPNEWTONSOFT]:{joinSymbol:" + ",stringLiteral:a=>`"${a}"`,variableDeclaration:a=>`var ${a} = "%s";`,urlFieldName:"fullUrl"},[Lang.GO]:{joinSymbol:" + ",stringLiteral:a=>`"${a}"`,variableDeclaration:a=>`${a} := "%s";`},[Lang.JAVA]:{joinSymbol:" + ",stringLiteral:a=>`"${a}"`,variableDeclaration:a=>`var ${a} = "%s";`,urlFieldName:"pathname"},[Lang.JAVA8]:{joinSymbol:" + ",stringLiteral:a=>`"${a}"`,variableDeclaration:a=>`String ${a} = "%s";`,urlFieldName:"fullUrl"},[Lang.JAVASCRIPT]:{variableWrapperFn:a=>"${"+a+"}",variableDeclaration:a=>`const ${a} = '%s';`},[Lang.NODEJS]:{variableWrapperFn:a=>"${"+a+"}",variableDeclaration:a=>`const ${a} = '%s';`},[Lang.PHP]:{joinSymbol:" . ",stringLiteral:a=>`"${a}"`,variableDeclaration:a=>`const ${a} = "%s";`},[Lang.PYTHON]:{stringLiteral:a=>`"${a}"`,joinSymbol:" + ",variableDeclaration:a=>`${a} = "%s"`},[Lang.RUBY]:{joinSymbol:" + ",stringLiteral:a=>`'${a}'`,variableDeclaration:a=>`${a} = '%s'`},[Lang.CURL]:{variableWrapperFn:(a,i)=>i||`{${a}}`,urlFieldName:"fullUrl",rawName:!0},[Lang.R]:{joinSymbol:" %&% ",variableDeclaration:a=>`${a} = "%s"`,urlFieldName:"fullUrl",stringLiteral:a=>`"${a}"`,variableWrapperFn:a=>`${a}`}},reservedVariableNames=["response","request","requests","data","url","payload","main","accessToken","resp","Program","client","postData","App","httpClient","params","pathname","host","body","fetch","query"];export class CodeBuilder{constructor({indentation:a,lineJoin:i="\n",variablesPrefix:e="",capitalize:n=!1,lang:r=Lang.CURL}){Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"indentation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"variablesPrefix",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"capitalize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lang",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"langOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=[],this.indentation=a,this.variablesPrefix=e,this.lineJoin=i||"\n",this.capitalize=n,this.lang=r,this.langOptions=Object.assign(Object.assign({},langOptions.default),langOptions[r])}buildLine(a,i){let e="",n=2;if("string"==typeof a)n=1,i=a,a=0;else if(null===a)return null;for(;a;)e+=this.indentation,a--;const r=Array.prototype.slice.call(arguments,n,arguments.length);return r.unshift(e+i),util.format.apply(this,r)}unshift(...a){return this.code.unshift(this.buildLine.apply(this,a)),this}push(...a){return this.code.push(this.buildLine.apply(this,a)),this}blank(){return this.code.push(null),this}join(){return this.code.join(this.lineJoin)}clean(){this.code.splice(1)}var(a,i=VariableType.CUSTOM){if(i===VariableType.PATH){let i=this.variablesPrefix+a;switch(reservedVariableNames.includes(i)&&(i=`${i}_path`),langToVarNameConvention[this.lang]){case NamingVariableConventions.UNDER_SCORES:i=StringUtility.toSnakeCase(i);break;case NamingVariableConventions.PASCAL_CASE:i=StringUtility.toPascalCase(i);break;case NamingVariableConventions.CAMEL_CASE:default:i=StringUtility.toCamelCase(i)}return i}return this.variablesPrefix?this.variablesPrefix+(this.capitalize?StringUtility.toPascalCase(a):a):a}}
//# sourceMappingURL=code-builder.js.map
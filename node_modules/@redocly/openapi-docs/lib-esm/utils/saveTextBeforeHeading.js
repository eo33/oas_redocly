import{Ast}from"@markdoc/markdoc";import{isString}from"@redocly/theme";import{deepClone}from"../services/utils";export function saveTextBeforeHeading(e){if(!isString(e)&&(null==e?void 0:e.result)){const r=deepClone(e),i=Ast.fromJSON(JSON.stringify(null==r?void 0:r.result));if(Array.isArray(i))for(const e of i)modifyNodeByHeading(e);else modifyNodeByHeading(i);return r.result=JSON.stringify(i),r.raw=saveTextBeforeHeading(r.raw),r}const r=new RegExp("^#{1,6}?\\s+","m"),i=e.search(r);return i>-1?e.substring(0,i):e}function modifyNodeByHeading(e){if(!Array.isArray(e.children))return;const r=e.children.findIndex((e=>"heading"===e.type));return-1===r||(e.children=e.children.slice(0,r)),e}
//# sourceMappingURL=saveTextBeforeHeading.js.map
var __awaiter=this&&this.__awaiter||function(e,o,r,t){return new(r||(r=Promise))((function(n,a){function i(e){try{l(t.next(e))}catch(e){a(e)}}function p(e){try{l(t.throw(e))}catch(e){a(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof r?o:new r((function(e){e(o)}))).then(i,p)}l((t=t.apply(e,o||[])).next())}))};import{jsx as _jsx}from"react/jsx-runtime";import{Suspense,memo,useEffect,useState,lazy}from"react";import styled from"styled-components";import{useAtomValue}from"jotai";import{convertOperationToReplayValue}from"./utils";import{globalOptionsAtom}from"../../jotai/store";import{operationStore}from"../../jotai/operation";import{appStore,environmentsAtom}from"../../jotai/app";import{useTranslate}from"../../hooks";const EmbeddedReplayOrig=lazy((()=>__awaiter(void 0,void 0,void 0,(function*(){return import("@redocly/replay").then((e=>({default:e.EmbeddedReplay})))}))));function EmbeddedReplayComponent({operation:e,corsProxyUrl:o,fullOpenApi:r}){const t=useTranslate(),{routingBasePath:n,mockServer:a}=useAtomValue(globalOptionsAtom),i=useAtomValue(operationStore(e.pointer)),p=useAtomValue(appStore),l=useAtomValue(environmentsAtom),[s,d]=useState(!1);return useEffect((()=>{d(!0)}),[]),_jsx(CompactWrapper,{children:s?_jsx(Suspense,{fallback:_jsx(LoadingWrapper,{children:t("openapi.loading","Loading...")}),children:_jsx(EmbeddedReplayOrig,{value:convertOperationToReplayValue(e,r,i,p),environment:p.environment,predefinedEnvValues:l,corsProxyUrl:o,operationUrl:n+e.href,mockServer:a,disableCollectionsTab:!0})}):_jsx(LoadingWrapper,{children:t("openapi.loading","Loading...")})})}export const EmbeddedReplay=memo(EmbeddedReplayComponent);const LoadingWrapper=styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100px;
`,CompactWrapper=styled.div`
  border: 1px solid var(--border-color-primary);
  border-radius: var(--border-radius-lg);
  padding: 0;
`;
//# sourceMappingURL=EmbeddedReplay.js.map
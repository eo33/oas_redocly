import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import{memo,useRef}from"react";import{GlobalStyle as ThemeCommonStyle,LayoutVariant,SidebarLogo,ThreePanelLayout,useMount}from"@redocly/theme";import{AppProvider,StoreProvider}from"./Providers";import{Overlay}from"../Overlay";import{RedocWrap}from"./styled";import{StickyResponsiveSidebar}from"../StickySidebar";import{SideMenu}from"../SideMenu";import{Content}from"../Content";import{useContentItems,useUppercase2LowercaseRedirect}from"../../hooks";import{withRouter}from"../../hoc/withRouter";import{withStore}from"../../hoc/withStore";import{compose}from"../../utils";import{useLicense}from"../../hooks/useLicense";const RedoclyOpenAPIDocsComponent=compose(withRouter,withStore,memo)((({licenseKey:e,onLoaded:o,children:i,options:t,layout:n,collapsedSidebar:r,parser:s,withCommonStyles:l})=>{var a,d,c,m,u;const p=useRef(null),{isValid:v,licenseInfo:f}=useLicense(e);useUppercase2LowercaseRedirect(),useMount((()=>{null==o||o()}));const{hideSidebar:h,scrollYOffset:y}=t||{},{contentItems:S}=useContentItems({parser:s,options:t}),x=null===(d=null===(a=s.definition)||void 0===a?void 0:a.info)||void 0===d?void 0:d["x-logo"];return _jsxs(_Fragment,{children:[l&&_jsx(ThemeCommonStyle,{}),_jsxs(RedocWrap,{className:"redoc-wrap",ref:p,children:[!v&&_jsx(Overlay,{licenseInfo:f}),!h&&_jsxs(StickyResponsiveSidebar,{scrollYOffset:y,className:"menu-content",collapsedSidebar:!r,children:[_jsx(SidebarLogo,{imageUrl:null==x?void 0:x.url,href:(null==x?void 0:x.href)||(null===(u=null===(m=null===(c=s.definition)||void 0===c?void 0:c.info)||void 0===m?void 0:m.contact)||void 0===u?void 0:u.url),altText:null==x?void 0:x.altText,backgroundColor:null==x?void 0:x.backgroundColor}),_jsx(SideMenu,{items:v?S:[]})]}),_jsxs(ThreePanelLayout,{className:"api-content",id:"api-content",layout:n===LayoutVariant.THREE_PANEL?LayoutVariant.THREE_PANEL:LayoutVariant.STACKED,collapsedSidebar:r,children:[_jsx(Content,{items:v?S:[],routingBasePath:t.routingBasePath}),i]})]})]})}));export function RedoclyOpenAPIDocs({onLoaded:e,children:o,store:i,withCommonStyles:t}){var n,r,s;return(null==i?void 0:i.definition)?_jsx(StoreProvider,Object.assign({},i,{children:_jsx(RedoclyOpenAPIDocsComponent,{onLoaded:e,basePath:null===(n=i.options)||void 0===n?void 0:n.routingBasePath,licenseKey:null===(r=i.options)||void 0===r?void 0:r.licenseKey,disableRouter:null===(s=i.options)||void 0===s?void 0:s.disableRouter,withCommonStyles:t,children:o})})):null}export function RedoclyOpenAPIDocsStandalone({definition:e,definitionUrl:o,options:i={},activeItemId:t,activeSampleLanguage:n,activeDeepLink:r}){return _jsx(AppProvider,{definition:e,definitionUrl:o,options:i,activeItemId:t,activeSampleLanguage:n,activeDeepLink:r,children:_jsx(RedoclyOpenAPIDocs,{withCommonStyles:!0})})}
//# sourceMappingURL=RedoclyOpenAPIDocs.js.map
import{useAtomValue}from"jotai";import{getCodeSample}from"../../services";import{globalStoreAtom}from"../../jotai/store";import{operationStore}from"../../jotai/operation";import{environmentAtom,getLangKey,languageAtom}from"../../jotai/app";import{useTranslate}from"../../hooks";export function useCodeSamples({payload:e,isWebhook:a,definitionSamples:t,pointer:o}){var n;const{parser:r,options:{codeSamples:s,generatedSamplesMaxDepth:l}}=useAtomValue(globalStoreAtom),i=useAtomValue(operationStore(o)),{languages:g}=useAtomValue(languageAtom),[m]=useAtomValue(environmentAtom),p=useTranslate(),u=new Map(null==g?void 0:g.map((({key:e,order:a})=>[e,a]))),d=t.filter((e=>u.has(getLangKey(e)))),c=new Set(d.map(getLangKey));let b=[];if(!a){b=createCodeSamples((null===(n=s.languages)||void 0===n?void 0:n.filter((({lang:e,label:a})=>"Payload"!==e&&!c.has(getLangKey({lang:e,label:a})))))||[],s,r.definition,l,i,m,p)}const f=[...d,...b];e&&u.has(e.lang.toLowerCase())&&f.push(Object.assign(Object.assign({},e),{order:u.get(e.lang.toLowerCase())}));const S=f.map((e=>{var a;const t=null!==(a=e.label)&&void 0!==a?a:e.lang;return Object.assign({key:getLangKey(e),title:t,order:"number"==typeof u.get(t.toLowerCase())?u.get(t.toLowerCase()):9999},e)})).sort(((e,a)=>e.order-a.order));return{samples:S}}function createCodeSamples(e,{skipOptionalParameters:a,withOAuth2Call:t},o,n,r,s,l){return e.map((({lang:e,label:i,options:g})=>({lang:e,label:i,get:i=>getCodeSample(Object.assign(Object.assign({},i),{lang:e,options:Object.assign(Object.assign({},g),{skipOptionalParameters:a,withOAuth2Call:t,spec:o,generatedPayloadSamplesMaxDepth:n,store:r}),environment:s,translate:l}))})))}
//# sourceMappingURL=useCodeSamples.js.map
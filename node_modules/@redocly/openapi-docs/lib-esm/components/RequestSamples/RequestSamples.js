var __rest=this&&this.__rest||function(e,o){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)o.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]])}return a};import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import{memo,useCallback,useMemo}from"react";import{useAtomValue,useAtom}from"jotai";import{PanelHeader}from"@redocly/theme";import styled from"styled-components";import{PayloadSamples}from"../PayloadSamples";import{CodeSample}from"./CodeSample";import{useCodeSamples}from"./useCodeSamples";import{isPayloadSample}from"../../models";import{createCodeSampleCopyEvent}from"../../events";import{globalStoreAtom}from"../../jotai/store";import{ServerListDropdown}from"../ServerListDropdown";import{LanguageDropdown}from"../Language";import{languageAtom}from"../../jotai/app";import{Replay}from"../Replay";import{CodeBlockPanel}from"../common";import{useActiveWithFallback}from"../../hooks";function RequestSamplesComponent(e){var{operation:o,disableFooter:a}=e,t=__rest(e,["operation","disableFooter"]);const[{activeLanguage:r},l]=useAtom(languageAtom),{samples:s}=useCodeSamples(o),{parser:n,options:{events:p,corsProxyUrl:m,hideReplay:i}}=useAtomValue(globalStoreAtom),d=useActiveWithFallback(s,r),c=useCallback((({lang:e,title:a})=>()=>{var t;const r=createCodeSampleCopyEvent({operation:o,label:a,lang:e,type:"request"});null===(t=null==p?void 0:p.codeSamplesCopy)||void 0===t||t.call(p,r)}),[o,p]),u=useMemo((()=>{if(!(a||o.isWebhook||i||o.hideReplay))return _jsx(Replay,{operation:o,corsProxyUrl:m,fullOpenApi:n.definition})}),[m,a,i,o,n.definition]),y=useMemo((()=>s.map((e=>e.key===d?_jsx("div",{children:isPayloadSample(e)?_jsx(PayloadSamples,Object.assign({content:e.requestBodyContent,onCopyClick:c(e)},t)):_jsx(CodeSample,Object.assign({lang:e.lang,source:e.source,externalSample:e,operation:o,onCopyClick:c(e)},t))},e.key+o.id):null))),[d,c,o,t,s]);return s.length?_jsx(CodeBlockPanel,{className:"panel-request-samples",header:()=>_jsxs(StyledPanelHeader,{isExpandable:!1,children:[_jsx(StyledServerListDropdown,{operation:o}),_jsx(LanguageDropdown,{activeTab:d,samples:s,onChange:l})]}),footer:u,isExpandable:!1,children:y}):null}export const RequestSamples=memo(RequestSamplesComponent);const StyledPanelHeader=styled(PanelHeader)`
  flex-wrap: nowrap;
`,StyledServerListDropdown=styled(ServerListDropdown)`
  padding-right: var(--spacing-base);
  min-width: 0;
`;
//# sourceMappingURL=RequestSamples.js.map
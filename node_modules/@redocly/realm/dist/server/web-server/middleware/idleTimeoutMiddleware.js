import{exit as r}from"../../utils/process.js";import{logger as o,readEnvVariable as n}from"../../utils/index.js";let i=null;const e=n("WEB_SERVER_IDLE_TIMEOUT");function u(){if(e){if(isNaN(+e))throw new Error(`IDLE_TIMEOUT must be a number, got ${e}`);i&&clearTimeout(i),i=setTimeout(()=>{o.info("Server is idle, stopping..."),r(0)},+e)}}function T(){return async(l,t)=>{u(),await t()}}export{T as idleTimeoutMiddleware,u as startIdleTimeout};

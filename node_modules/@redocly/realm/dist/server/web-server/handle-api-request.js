import{pathToFileURL as d}from"url";import{slash as p}from"../../shared/utils.js";import{logger as n}from"../utils/index.js";async function w(e,r,s,t){const i=n.startTiming(),{requestHandlers:o}=await m(t.serverOutDir),a=o[e.requestHandlerId];if(!a)return n.error(`Invalid request handler id: "${e.requestHandlerId}" for API route "${e.slug}`),r.newResponse(null,500,{});const l=(await a()).default,u=await l(r,t,e,s);return n.infoTime(i,`API request handled ${new URL(r.req.url).pathname}`),u}async function m(e){return process.env.REDOCLY_STATIC_BUNDLE?await import("@portal/api-request-handlers"):await import(d(`${p(e)}/api-request-handlers-entry.js`)+"?"+new Date)}export{w as handleApiRequest};

import i from"../../../cli/eject/ejectComponent.js";import p from"../../../cli/eject/resolveEjectParams.js";function d(n){return async e=>{const t=e.get("logger"),r=decodeURIComponent(e.req.param("componentName")),c=e.req.query("force");if(!r)return e.text("Bad request. Missing component name",400);const a=new Promise(o=>{const m={_:["component",r],"project-dir":n.contentDir,force:c==="true",onSuccess:s(200,o),onError:s(404,o),onOverride:s(409,o),config:n.config};u(m)});try{return await a}catch(o){return t.error(o),e.text("Server error",500)}}}async function u(n){const e=await p(n);if(!e)return!1;const{pathToThemeFolder:t,pathToPortalCustomThemeFolder:r,componentToEject:c,theme:a,options:o}=e;return i({pathToThemeFolder:t,pathToPortalCustomThemeFolder:r,componentToEject:c,theme:a},o)}function s(n,e){return t=>{e(new Response(JSON.stringify({message:t}),{status:n,headers:{"content-type":"application/json"}}))}}export{d as ejectComponentDataHandler};

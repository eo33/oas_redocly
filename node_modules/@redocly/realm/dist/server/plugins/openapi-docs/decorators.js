import{REDOCLY_TEAMS_RBAC as u}from"@redocly/config";function s(a,r,t){if(!r)throw new Error("Visitor required");if(a){a.description&&r(a,"description",t.location.absolutePointer+"/description",t),a.summary&&r(a,"summary",t.location.absolutePointer+"/summary",t),a["x-summary"]&&r(a,"x-summary",t.location.absolutePointer+"/x-summary",t);for(const o in a["x-enumDescriptions"])r(a["x-enumDescriptions"],o,t.location.absolutePointer+"/x-enumDescriptions/"+o,t)}}const f=({visitor:a})=>({any:{leave(r,t){s(r,a,t)}},ref:{leave(r,t){s(r,a,t)}}}),l=()=>{const a={};return{Tag:{enter(r){r?.["x-rbac"]&&(a[String(r.name)]=r["x-rbac"])}},any:{leave(r,t){if((t.type.name==="Operation"||t.type.name==="Webhook")&&"tags"in r&&Array.isArray(r.tags))for(const o of r.tags)a[o]&&(r["x-rbac"]=r["x-rbac"]||a[o]);r?.["x-rbac"]&&(r[u]=r["x-rbac"],delete r["x-rbac"])}}}};function y(a,r,t){const o={id:"markdown",decorators:{oas3:{markdown:f,rbac:l}}};return{...a,decorators:{"markdown/rbac":"on","markdown/markdown":{visitor:function(n,i,c,m){const{node:e}=m.resolve(n[i]);!e||typeof e!="string"||t.push({node:n,pointer:c,markdown:e,relativePath:r,key:i})}},...a.decorators||{}},plugins:[...a.plugins||[],o]}}export{f as MarkdownParserDecorator,l as RbacDecorator,y as injectDecoratorIntoConfig};

import{SearchIndexer as n}from"../search-indexer.js";import{getLocaleFromRelativePath as g}from"../../../fs/utils/get-locale-from-relative-path.js";import{extractDocumentSearchFacets as o}from"./search-facets.js";const P=(r,i,l,f,h)=>async t=>{if(h)return[];const s=t.metadata||{},e=new n(r,i,t.baseSlug||t.slug);e.addInfo(r.definition.info,s);for(const a of l)e.addItem(a);return e.getResult().map(a=>{const p=o({...s,...a},r.definition.info,f);return{url:a.url??t.slug,fsPath:t.fsPath,content:JSON.stringify({url:a.url,path:a.path,text:a.text,httpMethod:a.httpMethod,httpPath:a.httpPath,deprecated:a.deprecated,parameters:a.parameters,metadata:a.metadata,version:a.version,isDefaultVersion:a.isDefaultVersion,product:a.product,badges:a.badges,tags:a.tags,rbacTeams:a.rbacTeams},null,2),title:Array.isArray(a.title)?a.title.join(" "):a.title,locale:g(t.fsPath),product:a.product?.name,rbacTeams:a.rbacTeams,facets:p}})};export{P as getAiSearchDocuments};

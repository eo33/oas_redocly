import{getOperation as y,getServerEnvName as c,normalizeOptions as B,OpenAPIParser as q,getTagOrGroup as v}from"@redocly/openapi-docs";import{getOperationInfoById as x}from"./get-operation-info-by-id";import{getOperationInfoByPointer as E}from"./get-operation-info-by-pointer";function T(o,{operationId:s,pointer:f},l,{exampleKey:i,mimeType:a,environments:d,environment:p,requestBody:m}){let r;if(s?r=x(o.definition,s):f&&(r=E(o.definition,f)),!r)return;const g=new q(o.definition,void 0,B(o.options)),u=r.tags?.[0],O=u?v("group",{name:u},void 0):void 0,n=y(g,r,O,l,"");if(a&&n.requestBody?.content?.mediaTypes&&(n.requestBody.content.mediaTypes=n.requestBody?.content?.mediaTypes.filter(e=>e.name===a)),i&&n.requestBody?.content?.mediaTypes.forEach(e=>{if(!e.examples)return;const t=e.examples[i];e.examples=t?{[i]:t}:{}}),m&&n.requestBody?.content?.mediaTypes.forEach(e=>{e.examples={}}),d&&(n.servers=n.servers.map(e=>{const t=d?.[c(e)];return t?{...e,url:t.server||e.url}:e})),p){const e=n.servers.filter(t=>p===c(t));n.servers=e.length?e:n.servers}return n}export{T as getOperation};

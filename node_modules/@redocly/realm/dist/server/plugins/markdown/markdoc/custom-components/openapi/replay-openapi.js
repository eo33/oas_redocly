import o from"react";import{EmbeddedReplay as E,StoreProvider as S}from"@redocly/openapi-docs";import{Admonition as v}from"@redocly/theme/markdoc/components/Admonition/Admonition";import{ErrorMessage as O,OpenApiComponentWrap as b}from"../styled.elements.js";import{useStore as A}from"../../hooks/use-store.js";import{getOperation as M}from"./get-operation/index.js";import{getMockServerDocsConfig as P}from"../../../../openapi-docs/template/mock-server-config.js";const B=f=>{const{descriptionFile:s,operationId:a,pointer:l,exampleKey:c,mimeType:d,requestBody:r,parameters:y,options:t,environment:n,environments:i}=f,{store:e,error:g,baseSlug:u}=A(s),p=o.useMemo(()=>({...e?.options,...t}),[t,e?.options]),m=o.useMemo(()=>{if(e)return M(e,{operationId:a,pointer:l},p,{exampleKey:c,mimeType:d,environments:i,environment:n,requestBody:r})},[c,p,d,a,l,e,i,n,r]);return e?m?o.createElement(b,null,o.createElement(S,{options:{...t,disableRouter:!0,routingBasePath:u,mockServer:P(p.mockServer,u)},definition:e.definition,withState:{environments:i,environment:n,operation:{pointer:m.pointer,state:{requestValues:{body:r,...y}}}}},o.createElement(E,{operation:m,fullOpenApi:e.definition,corsProxyUrl:e.options.corsProxyUrl}))):o.createElement(v,{type:"danger"},"Cannot find OpenAPI operation by operationId or pointer in ",s):o.createElement(O,null,g)};export{B as ReplayOpenApi};

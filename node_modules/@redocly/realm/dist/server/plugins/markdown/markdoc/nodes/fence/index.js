import a from"@markdoc/markdoc";import{isStringNode as o}from"../../utils/is-sting-node.js";import{isPrimitive as u,isTag as m}from"../../../../../../shared/utils.js";const g=a.nodes.fence,h={...g,attributes:{...g.attributes,label:{type:String,render:"data-label"},title:{type:String,render:"data-title"},highlight:{type:String,render:"data-highlight"}},transform(e,i){const r=e.transformAttributes(i);let t=e.transformChildren(i);const s=r["data-language"],l=r["data-title"];switch(e.attributes.process===!1&&(t=[e.attributes.content]),s){case"mermaid":return o(t[0])?new a.Tag("Mermaid",{...r,diagramSource:t[0]},t):new a.Tag(e.tag,r,t);default:const c=t.map(n=>u(n)?n.toString():m(n)?n?.attributes?.rawtag:"").join("");return o(t[0])?new a.Tag("CodeBlock",{...r,header:{title:l,controls:{copy:{}}},source:c,lang:s},[]):new a.Tag(e.tag,r,t)}}};export{h as fence};

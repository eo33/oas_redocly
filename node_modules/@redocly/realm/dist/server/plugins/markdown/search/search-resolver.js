import f from"@markdoc/markdoc";import{REDOCLY_ROUTE_RBAC as p,REDOCLY_TEAMS_RBAC as S}from"../../../../shared/constants.js";import{getSearchDocuments as l}from"./get-search-documents.js";import{walkSections as R}from"./walk-sections.js";import{setDocumentSearchFacets as d,extractDocumentSearchFacets as h}from"./search-facets.js";function x(o,m,t,s){return async(r,e)=>{if(o?.excludeFromSearch)return[];const n=f.Ast.fromJSON(e.ast),a=R(n),i=r.metadata||{},c=h(i,t);d(c,t,s);const u=o?.seo?.title||m;return l(a,r.slug,u,e[S],e[p],c)}}export{x as searchResolver};

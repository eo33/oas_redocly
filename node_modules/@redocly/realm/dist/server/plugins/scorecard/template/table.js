import e,{useMemo as f,useState as y,useEffect as b}from"react";import{useExpanded as x,useSortBy as R,useTable as T}from"react-table";import E from"styled-components";import{StyledTable as w}from"./index.styles";function P({data:d,columns:a,sortBy:l,empty:i,renderRowSubComponent:o,subRowKey:p="subrows",getSubRows:m,headGroup:n}){const s=f(()=>l,[l]),{getTableProps:c,getTableBodyProps:g,headerGroups:h,rows:u,prepareRow:S}=T({columns:a,autoResetExpanded:!0,data:d,getSubRows:t=>t?.[p]||[],...l?{initialState:{sortBy:s}}:{}},R,x);return e.createElement(w,{...c()},e.createElement("thead",null,n,h.map(t=>e.createElement("tr",{...t.getHeaderGroupProps()},t.headers.map(r=>e.createElement("th",{...r.getHeaderProps(r.getSortByToggleProps()),style:{maxWidth:r.maxWidth,width:r.width}},r.render("Header"),r.disableSortBy?null:e.createElement(N,null,r.isSorted?r.isSortedDesc?" \u25BE":" \u25B4":" \u21D5")))))),e.createElement("tbody",{...g()},u.length?u.filter(t=>t.depth===0).map(t=>(S(t),e.createElement(e.Fragment,{key:t.id},e.createElement("tr",null,t.cells.map(r=>e.createElement("td",{...r.getCellProps(),style:{width:t.isExpanded?40:void 0}},r.render("Cell")))),t.isExpanded&&o?e.createElement(B,{row:t,getSubRows:m,staticSubRows:t.subRows,colSpan:a.length-1,renderRowSubComponent:o}):null))):e.createElement("tr",null,e.createElement(H,{colSpan:a.length},i||"No results to show"))))}function B({row:d,getSubRows:a,staticSubRows:l,colSpan:i,renderRowSubComponent:o}){const[p,m]=y(a?[]:l||[]);return b(()=>{a&&a(d.original).then(n=>n.map((s,c)=>({id:String(c),original:s}))).then(n=>m(n))},[d.original,a]),e.createElement(e.Fragment,null,p.map(({original:n,id:s})=>e.createElement("tr",{key:s},e.createElement("td",null,"\xA0"),e.createElement("td",{colSpan:i,style:{paddingTop:0}},o(n)))))}const H=E.td`
  text-align: center !important;
  padding: 32px;
`,N=E.span`
  font-family: monospace;
`;export{P as default};

import{getLocaleFromRelativePath as u}from"../../../../fs/utils/get-locale-from-relative-path.js";import{convertDocumentToMarkdown as h,getSearchDocument as d}from"./utils.js";import{extractDocumentSearchFacets as p}from"../search-facets.js";const b=(o,s)=>async(t,m)=>{const a=u(t.fsPath),c=t.getSidebar?.(t)||[],r=t.metadata||{},i=p(o,r);return l(o,m,t,c,s,a,i).filter(n=>!!n.content)};function l(o,s,t,m,a,c,r,i){const n=[];for(const e of m)if(e.type==="group")n.push(...l(o,s,t,e.items,a,c,r,e.label));else{const f=d(e,a,i||"");f?.name&&n.push({url:e.link||e.slug,fsPath:t.fsPath,content:h(f),title:f.name,locale:c,facets:r})}return n}export{b as getAiSearchDocuments};

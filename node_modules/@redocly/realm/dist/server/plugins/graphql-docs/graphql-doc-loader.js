import{buildSchema as f}from"graphql";import{MenuStore as l,AppStore as d}from"@redocly/graphql-docs";import{reporter as h}from"../../utils/index.js";import{getApiConfigByPath as u}from"../get-api-config.js";import{deepMerge as b}from"../../../shared/jsUtils.js";const A=async(r,{getConfig:p,fs:m})=>{const e=await p(),o=e?.graphql??{},n=await m.read(r),{graphql:s={},metadata:g}=u(e.apis,r),a=b(o||{},s,{feedback:o.feedback||e.feedback,pagination:"item"});let i,c;try{const t=f(n);c=new d(t),i=new l(t,a)}catch(t){h.panicOnBuild(t);return}return{menu:i,store:c,settings:a,metadata:g,content:n}};export{A as graphqlDocLoader};

import*as n from"react";import{useQuery as g}from"@tanstack/react-query";import{Admonition as l}from"@redocly/theme/markdoc/components/Admonition/Admonition";import h from"@portal/CircularProgress";import{MultiSelect as A}from"./MultiSelect";import{parseCombinedId as m}from"../../utils";function y(c){const{onChange:i,initialEnabledApis:o}=c,{isLoading:p,error:s,data:a}=g(["API-PRODUCTS"],async()=>{const e=await fetch("/api/api-keys/api-products");try{return await e.json()}catch{throw new Error("Something unexpected happened. Please try again later.")}}),d=(a||[]).sort((e,r)=>e.name.localeCompare(r.name)),t=(a||[]).filter(e=>{const{id:r}=m(e.id);return o.includes(r)});for(const e of o)t.some(u=>{const{id:f}=m(u.id);return f===e})||t.push({id:e,name:e});return n.useEffect(()=>{t.length>0&&i(t.map(e=>e.id))},[t.length]),p?n.createElement(h,null):s?n.createElement(l,{type:"danger"},s.message):a?.length?n.createElement(A,{options:d.map(e=>({label:e.name,value:e.id})),defaultValue:t.map(e=>({label:e.name,value:e.id})),onChange:i}):n.createElement(l,{type:"warning"},"You don't have access to any API.")}export{y as default};

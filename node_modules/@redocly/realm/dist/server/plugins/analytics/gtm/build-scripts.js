import a from"react";const v=n=>{const{trackingId:e,gtmAuth:t,gtmPreview:i,defaultDataLayer:o,dataLayerName:s="dataLayer",enableWebVitalsTracking:u=!1}=n,l=(n.selfHostedOrigin||"https://www.googletagmanager.com").replace(/\/$/,""),c=t&&i?`&gtm_auth=${t}&gtm_preview=${i}&gtm_cookies_win=x`:"";let m="";o&&(m=f(o,s));const r=[];u&&r.push(a.createElement("script",{key:"portal-plugin-google-tagmanager-web-vitals",dangerouslySetInnerHTML:{__html:`
              !function(){var e,t,n,i,r={passive:!0,capture:!0},a=new Date,o=function(){i=[],t=-1,e=null,f(addEventListener)},c=function(i,r){e||(e=r,t=i,n=new Date,f(removeEventListener),u())},u=function(){if(t>=0&&t<n-a){var r={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};i.forEach((function(e){e(r)})),i=[]}},s=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){c(e,t),a()},i=function(){a()},a=function(){removeEventListener("pointerup",n,r),removeEventListener("pointercancel",i,r)};addEventListener("pointerup",n,r),addEventListener("pointercancel",i,r)}(t,e):c(t,e)}},f=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,s,r)}))},p="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(p=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0);o(),self.webVitals={firstInputPolyfill:function(e){i.push(e),u()},resetFirstInputPolyfill:o,get firstHiddenTime(){return p}}}();
            `}})),r.push(a.createElement("script",{key:"plugin-google-tagmanager",dangerouslySetInnerHTML:{__html:`
          ${m}
          ${p({trackingId:e,environmentParamStr:c,dataLayerName:s,selfHostedOrigin:l})}`}}));const d=[a.createElement("noscript",{key:"plugin-google-tagmanager",dangerouslySetInnerHTML:{__html:g({trackingId:e,environmentParamStr:c,selfHostedOrigin:l})}})];return{headComponents:r,preBodyComponents:d}},p=({trackingId:n,environmentParamStr:e,dataLayerName:t,selfHostedOrigin:i})=>`
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '${i}/gtm.js?id='+i+dl+'${e}';f.parentNode.insertBefore(j,f);
  })(window,document,'script','${t}', '${n}');`,g=({trackingId:n,environmentParamStr:e,selfHostedOrigin:t})=>`<iframe src="${t}/ns.html?id=${n}${e}" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe>`,f=(n,e)=>{let t=`window.${e} = window.${e} || [];`;return t+=`window.${e}.push(${JSON.stringify(n)});`,t};export{v as buildScripts};

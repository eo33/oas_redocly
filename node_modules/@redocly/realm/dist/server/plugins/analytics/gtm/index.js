import{isProductionMode as i}from"../../../../shared/env.js";import{buildScripts as s}from"./build-scripts.js";import{resolveBrowserHooksPath as a}from"./resolve-browser-hooks.js";import{Feature as d}from"../../../entitlements/entitlements.types.js";async function u(){return{id:"Google Tag Manager Analytics",requiredEntitlements:[d.Analytics],async processContent(o,{getConfig:t}){const n=(await t())?.analytics?.gtm;if(!n?.trackingId||!i&&!n.includeInDevelopment)return;const{headComponents:e,preBodyComponents:r}=s(n);o.addSsrComponents(e,"head"),o.addSsrComponents(r,"preBody"),o.addBrowserPlugin(a())}}}export{u as gtmAnalyticsPlugin};

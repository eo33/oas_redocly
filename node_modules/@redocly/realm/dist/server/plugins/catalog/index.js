import{isTruthy as g}from"@redocly/openapi-core";import{Feature as m}from"../../entitlements/entitlements.types.js";import{getTemplatePath as u}from"./get-template-path.js";import{normalizeRouteSlug as p}from"../../../shared/utils.js";const r="catalog-custom-fields";async function I(){return{id:"Catalog",requiredEntitlements:[m.Catalog],async processContent(e,{getConfig:s}){const l=e.createTemplate("catalog","@redocly/theme/components/Catalog/Catalog");e.registerServerPropsGetter(r,u("./get-server-props.js"));const o=await s(),c=!!o.rules?.["custom-fields-schema"],i=o.catalog??{};for(const[n,t]of Object.entries(i)){const a=p(t.slug);e.addRoute({duplicateInAllLocales:!0,slug:a,fsPath:a,templateId:l,excludeFromSidebar:!0,serverPropsGetterIds:c?[r]:[],getNavText:()=>Promise.resolve(t.title||"API Catalog"),getStaticData:async()=>({props:{catalogId:n,catalogConfig:{...t,filters:t.filters?.filter(g),items:void 0},seo:{title:t.title||"API Catalog"}}})})}}}}export{r as CUSTOM_FIELDS_SERVER_PROPS_GETTER_ID,I as catalogPlugin};

import{replaceEnvVariablesDeep as l,reporter as c}from"../../utils/index.js";import{collectMissingEnvVariablesDeep as a,isProductionMode as u}from"../../../shared/env.js";let t;function p(e,n=!0){if(u()&&t)return t;try{t=n?v(e||{}):e||{}}catch{return{}}return t}function v(e){const n={};for(const r of Object.keys(e)){const i=a(e[r]),o=["OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","ORG_ID"];if(i.filter(s=>!o.includes(s)).length>0){c.panicOnBuildContentError(`Failed to resolve config for SSO provider '${r}'. The following environment variables are not set: ${i.join(", ")}`);continue}else n[r]=l(e[r])}return n}export{p as resolveAuthConfig};

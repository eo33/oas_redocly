import{readFile as a}from"node:fs/promises";import{join as n}from"node:path";import r from"semver";import{PACKAGE_NAME as i}from"../../config/product-gates.js";import{PORTAL_VERSION as t}from"../version.js";import{reporter as s}from"./reporter/reporter.js";async function k(){let e="";try{const o=await a(n(process.cwd(),"package.json"));e=JSON.parse(o.toString()).dependencies?.[i]||""}catch{return}e&&!r.satisfies(t,e)&&s.panicOnBuildContentError(`Detected version mismatch: Installed (${t}) doesn't match package.json (${e}). Run 'npm install' to update and commit the package-lock.json.`)}export{k as validateInstalledVersion};

import*as a from"path";import{logger as i}from"../../server/utils/index.js";import{DEFAULT_THEME_NAME as m,USER_THEME_ALIAS as y}from"../../server/config/constants.js";import{resolveTheme as A}from"./resolveTheme.js";import{EntitlementsProvider as F}from"../../server/entitlements/entitlements-provider.js";const p=["./core/**","./markdoc/**/default.*","**/__mocks__/**","**/index.*","**/utils/**/*","**/__tests__/**/*","**/__snapshots__/**/*","**/*.stories.*","**/variables.*"],v=["./components/Catalog/CatalogCard.*","./components/ColorModeSwitcher/**","./components/Feedback/**","./components/Filter/**","./components/Footer/**","./components/LanguagePicker/**","./components/Menu/**","./components/Navbar/**","./components/PageNavigation/**","./components/Product/**","./components/Search/**","./components/UserMenu/**","./layouts/RootLayout.*","./layouts/NotFound.*","./icons/**","./markdoc/**"];async function j(t){const[l,r]=t._,{theme:g,force:u,onSuccess:E,onError:d,onOverride:_,config:f}=t,h=F.instance(),s=a.resolve(t["project-dir"]);let e=g;e||(e=m);const n=await A(s,f.plugins||[],e,r);n||i.panicOnContentError(`Theme ${e} not found. Skipping eject.`);const o=n?.config.ejectIgnore;o&&!Array.isArray(o)&&i.warn("'ejectIgnore' must be of type Array. Skipping.");const c=await h.getPackageEjectIgnore(),T={force:u,onSuccess:E,onError:d,onOverride:_,onlyFiles:e===m?v:void 0,ignoreFiles:Array.isArray(o)?[...o,...c,...p]:[...c,...p]};return{objectType:l,pathToThemeFolder:n?.pluginDirAbsolutePath,pathToPortalCustomThemeFolder:a.resolve(s,y),componentToEject:r,theme:e,options:T}}export{p as DEFAULT_IGNORED_FILES,v as EJECTABLE_FILES,j as default};

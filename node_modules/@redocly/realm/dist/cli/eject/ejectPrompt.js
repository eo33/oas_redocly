import*as i from"path";import m from"enquirer";import{toFileTree as u,stripComponentThemePath as f}from"./themeOperations.js";import{addRandomZwsp as p}from"../utils/add-random-zwsp.js";const h=4;var a;(function(t){t.File="file",t.Folder="folder"})(a||(a={}));function l(t,n=".",o=1){const s=[];return Object.entries(t).forEach(([r,e])=>{r==="."?s.push(...(e||[]).map(c=>({value:{path:i.join(n,c),type:a.File},name:p(i.parse(c).name),level:o}))):s.push({value:{path:r,type:a.Folder},level:o,name:`${p(r)}/`,choices:l(e,i.join(n,r),o+h)})}),s}async function F(t){try{return new m.prompts.Confirm({name:"confirmation",message:t}).run()}catch{return!1}}async function g(t,n){const o=u(t,n),s=l(o);try{const r=await new m.prompts.MultiSelect({name:"ejected",hint:"(Use <arrows> to move, <space> to select, and <enter> to submit)",message:"Please select from list components to eject:",choices:s,limit:15,margin:[1,0,0,0],result(e){return this.map(e)},validate(e){return e.length?!0:"Please select at least one component."}}).run();return Object.values(r).filter(e=>e.type===a.File).map(e=>f(e.path,n))}catch{return[]}}export{F as askUserToConfirm,g as askUserToSelectComponents,l as getFileChoices};

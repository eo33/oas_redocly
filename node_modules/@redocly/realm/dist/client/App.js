import*as e from"react";import{useEffect as l}from"react";import{Outlet as u,useLocation as f,useNavigate as E}from"react-router-dom";import{Helmet as d}from"react-helmet";import{components as g}from"@redocly-markdoc/components";import h from"@markdoc/markdoc/dist/react";import{RootLayout as D}from"@redocly/theme/layouts/RootLayout";import{PageLayout as P}from"@redocly/theme/layouts/PageLayout";import{components as p}from"@redocly/theme/markdoc/default";import{Sidebar as v}from"@portal/Sidebar/Sidebar";import{loadAndNavigate as C}from"@portal/utils/loadAndNavigate";import{useActions as L}from"@portal/Sidebar/useActions";import{useScrollTracker as T}from"@portal/hooks/useScrollTracker";import*as b from"../server/plugins/markdown/markdoc/custom-components/index";import{OPENAPI_DOCS_TEMPLATE_ID as S}from"../shared/constants";import{isTag as _,removeTrailingSlash as y}from"../shared/utils";import{combineUrls as N}from"../shared/urls";import{ErrorBubble as O}from"./app/ErrorBubble";import{DefaultStyles as R}from"./styling/default-styles";import{ThemeDataProvider as k}from"./providers/theme/ThemeDataProvider";import{PageDataContext as A}from"./providers/page-data/PageDataContext";import{useRouterForLocalLinks as I,useRunningEnvironmentCheck as x}from"./providers/hooks";import{usePageData as U,usePageDataLoader as V,useSidebarItemsData as B}from"./providers/page-data/hooks";import{ErrorBoundary as M}from"./ErrorBoundary";import{ErrorDetails as F,Loader as H}from"./server-entry";import"@styles";import{useRouteChangeTracker as j}from"./app/hooks/useRouteChangeTracker";import{isInIframe as q}from"./utils";import{useL10n as w}from"./app/l10n";import{PostMessageProvider as z}from"./providers/post-message/PostMessageProvider";import{ScriptLoader as G}from"./ScriptLoader";import{clientRoutes as J}from"./runtime/generated/routes.js";import{PageCounter as K}from"./app/PageCounter";globalThis.__LOADER.markdocComponents={...b,...p};function Se(){const t=V(),[r,a]=e.useState(t),o=f(),m=E();w(),l(()=>{t?a(t):C(m,o.pathname+o.search+o.hash).then(()=>a(H.loadSync(o.pathname)))},[o,m]),I();const n=x();return n?(console.log(n),e.createElement(F,{error:{message:n,name:""}})):r?e.createElement(M,null,e.createElement(R,null),e.createElement(A.Provider,{value:t||r},e.createElement(k,null,e.createElement(z,{enabled:process.env.NODE_ENV==="development"||q()},e.createElement(u,null))))):null}function i(){j(),T();const t=U(),r=L(),{layout:a}=r,o={layout:a},m=B(),n=t?.props.ast&&_(t.props.ast)?h(t.props.ast,e,{components:{...globalThis.__LOADER.markdocComponents,...p,...g}}):null,s=t?.props.seo?.siteUrl,c=y(t?.slug||"");return l(()=>{document.documentElement.classList.add("ready")},[]),e.createElement(e.Suspense,null,e.createElement(D,null,e.createElement(P,{sidebar:m.length>0&&e.createElement(v,{layoutControls:r})},e.createElement(d,null,e.createElement("title",null,t?.props.seo?.title),s?e.createElement("link",{rel:"canonical",href:N(s,c)}):null),t?.Template?e.createElement(t.Template,{pageProps:t?.templateId===S?{...t.props,openapiOptions:o}:t?.props,children:n}):null),process.env.NODE_ENV!=="production"&&e.createElement(O,null),process.env.NODE_ENV!=="production"&&e.createElement(K,null),e.createElement(G,null)))}const _e=[...J.map(t=>({Component:i,path:t.substring(1)+"/*"})),{Component:i,path:"*"}];export{Se as App,i as Page,_e as routes};

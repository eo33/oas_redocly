import{useEffect as u}from"react";import{useLocation as d}from"react-router-dom";let r=[],i=[];const c=new Map;let s=null;function h(t){t&&r.push(t)}function P(t){t&&i.push(t)}function w(){return s||Promise.resolve()}function x(){const t=d();return u(()=>{s=new Promise(e=>{m(r).then(()=>{const n=f(i);return i=[],n}).then(()=>{e()}),r=[]})},[t.pathname]),null}function a(t){const e=c.get(t);if(e)return e;const n=new Promise((p,l)=>{const o=document.createElement("script");o.src=t,o.addEventListener("load",()=>p()),o.addEventListener("error",()=>l("Error loading script")),document.body.appendChild(o)});return c.set(t,n),n}async function m(t){for(const e of t)await a(e)}async function f(t){return Promise.allSettled(t.map(a))}export{x as ScriptLoader,P as loadScriptFromReactAsync,h as loadScriptFromReactSync,w as waitForContentScripts};

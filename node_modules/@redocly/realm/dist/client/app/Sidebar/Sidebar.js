import e,{useEffect as S,useState as u}from"react";import E from"styled-components";import{Menu as I}from"@redocly/theme/components/Menu/Menu";import{SidebarActions as y}from"@redocly/theme/components/SidebarActions/SidebarActions";import{Sidebar as A}from"@redocly/theme/components/Sidebar/Sidebar";import{VersionPicker as L}from"@redocly/theme/components/VersionPicker/VersionPicker";import{Button as w}from"@redocly/theme/components/Button/Button";import{ArrowLeftIcon as B}from"@redocly/theme/icons/ArrowLeftIcon/ArrowLeftIcon";import{telemetry as p}from"@portal/telemetry";import{usePreloadHistory as P}from"@portal/usePreloadHistory";import{useTranslate as T}from"@portal/hooks";import{usePageSharedData as D,usePageVersions as x}from"../../providers/page-data/hooks";import{useSidebarItems as R}from"./useSidebarItems";import{renderAdmonition as V,RequestAccessButton as _}from"./RequestAccessButton";function Y({layoutControls:r}){const{versions:s=[]}=x()||{},f=s.find(t=>t?.active),{translate:a}=T(),{currentItems:b,backLink:n,pushDrilldownState:h,popDrilldownState:k}=R(f),[m,v]=u(),{collapsedSidebar:i}=r,c=D("openAPIDocsStore")?.definition.info?.["x-metadata"]?.apiId,g=P(),[l,o]=u(void 0);return S(()=>{const t=setTimeout(()=>o(void 0),350);return()=>clearTimeout(t)},[l]),e.createElement(e.Fragment,null,e.createElement(A,{collapsed:i,menuItemsAnimation:l,versions:e.createElement(L,{versions:s,onChange:t=>{p.send("version_picker_selection_change",{action:"change"});const d=location.hash?t?.link+location.hash:t?.link;d&&g.push(d)}}),menu:e.createElement(I,{items:b,onDrilldownOpen:t=>{o("slideInRight"),h(t)}}),footer:e.createElement("div",{style:{width:"100%"}},!i&&V(m),e.createElement(y,{...r,requestAccessButton:c?e.createElement(_,{apiId:c,status:m,setStatus:v}):null})),header:n&&e.createElement(q,{icon:e.createElement(B,null),iconPosition:"left",variant:"ghost",size:"medium","data-component-name":"Sidebar/BackButton",to:n.slug,onClick:()=>{o("slideInLeft"),k(),p.send(n.event,{action:"click"})}},i?"":n.label?e.createElement("div",{"data-translation-key":"sidebar.menu.backToLabel"},a("sidebar.menu.backToLabel",{value:a(n.labelTranslationKey,n.label)})):e.createElement("div",{"data-translation-key":"sidebar.menu.backLabel"},a("sidebar.menu.backLabel")))}))}const q=E(w)`
  padding: var(--menu-item-padding-vertical) 0;
  height: calc(var(--line-height-base) + var(--menu-item-padding-vertical) * 2);
  justify-content: flex-start;
  width: 100%;
`;export{Y as Sidebar};

import n from"i18next";import{useEffect as r}from"react";import{useGlobalData as a}from"../useGlobalData";import{useL10nConfig as i}from"../hooks";import{isBrowser as m}from"../../../shared/jsUtils";import{initL10n as s}from"../../../shared/l10n/initL10n";import{DEFAULT_LOCALE_PLACEHOLDER as l}from"../../../shared/constants";const E=()=>{const{l10n:e}=a()||{},{currentLocale:t}=i();r(()=>{s(e,t)},[]),r(()=>{!t||t===l?document.documentElement.removeAttribute("lang"):document.documentElement.setAttribute("lang",t)},[t]),m()||s(e,t)},A=e=>{if(!e)return;const t=new Set(n.languages);for(const o of Object.keys(e.translations))n.addResourceBundle(o,"translation",e.translations[o].translation,!0,!0),t.delete(o);for(const o of t)n.removeResourceBundle(o,"translation")};export{A as updateTranslations,E as useL10n};

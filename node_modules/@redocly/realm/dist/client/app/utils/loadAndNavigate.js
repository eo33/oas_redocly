import{withPathPrefix as f}from"@redocly/theme";import{withLoadProgress as u}from"./withLoadProgress";let d;async function p(a,o,i="browser",r){d=o;const{pathname:n,hash:w,search:s}=new URL(o,window.location.origin+window.location.pathname),t=decodeURIComponent(w),h=decodeURIComponent(window.location.hash),m=window.__LOADER,e=await u(m.tryLoad(n));if(e?.redirectTo)return p(a,e.redirectTo,i,r);if(o.startsWith(f("/_auth/"))){window.location.href=o;return}if(e&&d===o){if((n!==window.location.pathname||s!==window.location.search||t!==h)&&a({pathname:n,search:s,hash:t},{...r,state:{origin:i},unstable_flushSync:!0}),e.props?.disableAutoScroll)return;if(t){const c=t.slice(1),l=document.getElementById(c)||document.getElementsByName(c)[0];l&&l.scrollIntoView()}else window.scrollTo(0,0)}}export{p as loadAndNavigate};

import t,{useState as T}from"react";import C from"styled-components";import{Button as o}from"@redocly/theme/components/Button/Button";import{isEmailValid as x}from"@portal/pages/DevLogin/utils";import{DEFAULT_AUTHENTICATED_TEAM as n}from"../../../../shared/constants";import{TeamsSelector as g}from"./styled";function F({teams:s,formState:{values:a,errors:l},setFormState:m,onSubmit:d}){const[u,p]=T([]),f=()=>m({values:a,errors:void 0}),c=()=>{a?.email&&x(a.email)?(d(),l&&f()):m({values:a,errors:{...l,email:"Please enter a correct email"}})},h=({target:e})=>{m({errors:l,values:{...a,[e.name]:e.value}})},E=({target:e})=>{const i=[...a?.teams||[],e.name];e.checked?m({errors:l,values:{...a,teams:i}}):m({errors:l,values:{...a,teams:a.teams?.filter(k=>k!==e.name)}})},b=e=>{e.preventDefault(),c()},y=()=>{const e=prompt("Enter custom team name");e&&p(i=>[...i,e])};return t.createElement("form",{id:"main_form",onSubmit:b},t.createElement("div",{className:"email-screen"},t.createElement("span",{className:"label","data-cy":"email-input-label"},"Email address"),t.createElement("input",{type:"email",id:"email",name:"email",autoFocus:!0,onChange:h,"data-cy":"email-input",className:l?.email?"error":""}),l?.email&&t.createElement("span",{id:"email-screen-email-error",className:"email-error-block","data-cy":"incorrect-email-error"},l.email),t.createElement(t.Fragment,null,t.createElement("span",{className:"label","data-cy":"email-input-label"},"Select teams"),t.createElement(g,null,s.concat(u).map(e=>t.createElement(r,{key:e},t.createElement("input",{type:"checkbox",name:e,id:e,onChange:E}),t.createElement("label",{htmlFor:e},e))),t.createElement(r,{key:n},t.createElement("input",{type:"checkbox",name:n,id:n,disabled:!0,checked:!0}),t.createElement("label",{htmlFor:n,title:"This team is enabled for all authenticated users by default"},n)),t.createElement(o,{type:"button",size:"small",fullWidth:!0,onClick:y},"+ Add custom team"))),t.createElement(o,{fullWidth:!0,size:"large",variant:"primary",onClick:c,"data-cy":"log-in-button"},"Login")))}const r=C.div`
  display: flex;
  overflow: hidden;

  & > input[type='checkbox'] {
    width: 14px;
  }
  & > label {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }
`;export{F as DevLoginForm};

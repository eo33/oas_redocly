import{useCallback as n,useEffect as s}from"react";import{syncScrollWithProject as l}from"../utils/syncScrollWithEditor.js";import{usePostMessage as c}from"../../providers/post-message/use-post-message.js";import{isInIframe as i}from"../../utils.js";const p=()=>{const{sendMessage:e}=c(),o=n(()=>{if(!window.document.querySelector(":hover"))return;const{percentScrolled:r,sequenceNumber:t}=l(window.scrollY);e({type:"editor-scroll-updated",percentScrolled:r,sequenceNumber:t}),e({type:"scroll-updated",position:{absolute:window.scrollY,relative:Math.round(window.scrollY/(window.document.body.clientHeight-window.innerHeight)*100)}})},[e]);s(()=>{if(i())return window.addEventListener("scroll",o,{passive:!0}),()=>{window.removeEventListener("scroll",o)}},[o])};export{p as useScrollTracker};

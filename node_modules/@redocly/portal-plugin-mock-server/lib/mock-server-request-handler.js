var h=function(n,u,t,o){function i(e){return e instanceof t?e:new t(function(r){r(e)})}return new(t||(t=Promise))(function(e,r){function f(s){try{c(o.next(s))}catch(d){r(d)}}function a(s){try{c(o.throw(s))}catch(d){r(d)}}function c(s){s.done?e(s.value):i(s.value).then(f,a)}c((o=o.apply(n,u||[])).next())})};import{createMockServer as l}from"@redocly/mock-server";function m(n,u,t,o){return h(this,void 0,void 0,function*(){const{slug:i}=t,{definition:e,config:r}=o.props,f=yield l(e,r),a=p(n.req.raw,i),c=yield f(a);return new Response(c.body,{status:c.statusCode,headers:c.headers})})}function p(n,u){const t=new URL(n.url),o=t.pathname.replace(u,""),i=Object.fromEntries(n.headers.entries());let e=null;return{path:o,method:n.method,query:t.search,headers:i,getBody:()=>h(this,void 0,void 0,function*(){if(e===null){const r=yield n.arrayBuffer();e=Buffer.from(r)}return e})}}export{m as default};
